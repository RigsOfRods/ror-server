language: cpp
sudo: false

compiler:
  - gcc
  - clang

env:
  - ANALYZE=false

addons:
  # The following updates are needed for Travis VM running Ubuntu 12.04 and should be removed when Travis updates their OS
  # update gcc for C++11 support
  apt:
    sources:
      - ubuntu-toolchain-r-test

    packages:
      - gcc-6
      - g++-6

before_install:
  # show some information about the build host
  - cat /proc/cpuinfo | grep -m1 "model name"  # CPU model
  # use specific compiler version
  - if [ "$CXX" = "g++" ]; then export CXX="g++-6" CC="gcc-6"; fi
  - chmod +x ./tools/travis/linux/travis.sh
  - chmod +x ./tools/travis/linux/build.sh

script:
  - ./tools/travis/linux/travis.sh

notifications:
  irc:
    template:
      - "%{repository}#%{build_number} %{commit} %{author}: %{message} %{build_url}"
    channels:
      - "irc.freenode.org#rigsofrods-dev"
    use_notice: true

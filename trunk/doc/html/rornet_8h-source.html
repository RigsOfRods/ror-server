<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>rorserver: dev/workspace/rorserver/rornet.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.3 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="annotated.html"><span>Classes</span></a></li>
    <li class="current"><a href="files.html"><span>Files</span></a></li>
  </ul>
</div>
<h1>dev/workspace/rorserver/rornet.h</h1><a href="rornet_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">This file is part of "Rigs of Rods Server" (Relay mode)</span>
<a name="l00003"></a>00003 <span class="comment">Copyright 2007 Pierre-Michel Ricordel</span>
<a name="l00004"></a>00004 <span class="comment">Contact: pricorde@rigsofrods.com</span>
<a name="l00005"></a>00005 <span class="comment">"Rigs of Rods Server" is distributed under the terms of the GNU General Public License.</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">"Rigs of Rods Server" is free software; you can redistribute it and/or modify</span>
<a name="l00008"></a>00008 <span class="comment">it under the terms of the GNU General Public License as published by</span>
<a name="l00009"></a>00009 <span class="comment">the Free Software Foundation; version 3 of the License.</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">"Rigs of Rods Server" is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment">GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment"></span>
<a name="l00016"></a>00016 <span class="comment">You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment">along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00018"></a>00018 <span class="comment">*/</span>
<a name="l00019"></a>00019 <span class="preprocessor">#ifndef __RoRnet_H__</span>
<a name="l00020"></a>00020 <span class="preprocessor"></span><span class="preprocessor">#define __RoRnet_H__</span>
<a name="l00021"></a>00021 <span class="preprocessor"></span>
<a name="l00022"></a><a class="code" href="rornet_8h.html#82cd61d8dfabc6a7d9ab209995f85e93">00022</a> <span class="preprocessor">#define SERVERPORT 12333</span>
<a name="l00023"></a><a class="code" href="rornet_8h.html#7ebc2057d87fea616582a08987305d70">00023</a> <span class="preprocessor"></span><span class="preprocessor">#define CLIENTPORT 12334</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00025"></a><a class="code" href="rornet_8h.html#d3a96e52196c280fad75f75417ef4b37">00025</a> <span class="preprocessor">#define MAX_PEERS 64</span>
<a name="l00026"></a>00026 <span class="preprocessor"></span><span class="comment">//#define MAX_MLEN 1024</span>
<a name="l00027"></a><a class="code" href="rornet_8h.html#b234d1358562b66925fb7223c087556b">00027</a> <span class="preprocessor">#define MAX_MESSAGE_LENGTH 8192</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a><a class="code" href="rornet_8h.html#52e74b0b3a552c70b8b872316f2b5d1d">00029</a> <span class="preprocessor">#define RORNET_VERSION "RoRnet_2.0"</span>
<a name="l00030"></a>00030 <span class="preprocessor"></span>
<a name="l00031"></a><a class="code" href="rornet_8h.html#51f3aaebc22485f3c360eda3f53e7392">00031</a> <span class="preprocessor">#define MSG_REGISTER 0 //client registers with magic!</span>
<a name="l00032"></a><a class="code" href="rornet_8h.html#009739def9ef4526ecd7b0f33baaec0c">00032</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_PING 1 //heartbeat sent by server ()</span>
<a name="l00033"></a><a class="code" href="rornet_8h.html#d16a1fbd9be55d640b96a9a2dd66a626">00033</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_PING_RESP 2 //heartbeat client response ()</span>
<a name="l00034"></a><a class="code" href="rornet_8h.html#334ee02adb654e23ae00e17ac1c6f1b8">00034</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_SIGNAL 3 //signals a new client</span>
<a name="l00035"></a><a class="code" href="rornet_8h.html#5ed28c82f75be170196cbaf1c842355a">00035</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_ZOMBIE 4 //signals a zombie client</span>
<a name="l00036"></a><a class="code" href="rornet_8h.html#2b6e6c53937d64f8bb86e00c91fc2734">00036</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_GET_LIST 5 //query a client list =&gt;response by a SIGNAL</span>
<a name="l00037"></a><a class="code" href="rornet_8h.html#bb661b14130b7a880b80aae9ed7bbba8">00037</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_QUERY_TERRAIN 6 //query terrain name</span>
<a name="l00038"></a><a class="code" href="rornet_8h.html#cb6cf2caddd08599b507c70d7cdaa432">00038</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_TERRAIN 7 //tell what terrain to load, or sets what terrain to load</span>
<a name="l00039"></a><a class="code" href="rornet_8h.html#a65547aa6faa39456425ba7e0e6c4642">00039</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_VERSION 8 //tells what network version is running</span>
<a name="l00040"></a><a class="code" href="rornet_8h.html#2503c4819fa917ed438d1ac274bc9d83">00040</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_VEHICLE 9 //P2P tells which vehicle to load</span>
<a name="l00041"></a><a class="code" href="rornet_8h.html#d99a75e7e9651f087cf517a4bbc13615">00041</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG_VDATA 10 //P2P vehicle data (large)</span>
<a name="l00042"></a>00042 <span class="preprocessor"></span>
<a name="l00043"></a><a class="code" href="rornet_8h.html#e15732ad2780766155fc2172248ec34d">00043</a> <span class="preprocessor">#define MSG2_HELLO 1000 //client sends its version as first message</span>
<a name="l00044"></a><a class="code" href="rornet_8h.html#1149a00fb92ba44404d2fd520db1bbfa">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG2_VERSION 1001 //server responds with its version</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span>
<a name="l00046"></a><a class="code" href="rornet_8h.html#097c85ecbdb0a971d51a15d7337269b6">00046</a> <span class="preprocessor">#define MSG2_FULL 1002 //no more place</span>
<a name="l00047"></a><a class="code" href="rornet_8h.html#6cdfc05f069bcb03d9781d81a7383ed6">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG2_BANNED 1003 //Uh</span>
<a name="l00048"></a><a class="code" href="rornet_8h.html#1a6471bc93a5ac8373501eb0f77a6a9d">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG2_WELCOME 1004 //we can proceed</span>
<a name="l00049"></a>00049 <span class="preprocessor"></span>
<a name="l00050"></a><a class="code" href="rornet_8h.html#25d2f7da909b8f39cfaf856154711fcf">00050</a> <span class="preprocessor">#define MSG2_USE_VEHICLE 1005 //the client says which vehicle it uses</span>
<a name="l00051"></a><a class="code" href="rornet_8h.html#68b3e9136c61e8a1a56d6357b2f2c10b">00051</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG2_SPAWN 1006 //the server asks to spawn a new vehicle</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00053"></a><a class="code" href="rornet_8h.html#64b062aee125312cfd193dbe8b6080b1">00053</a> <span class="preprocessor">#define MSG2_BUFFER_SIZE 1007 //the clients tells the buffer size to use for the selected vehicle</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a><a class="code" href="rornet_8h.html#e9c54c4f6669a86fd7c1aeafc9cdfd9f">00055</a> <span class="preprocessor">#define MSG2_VEHICLE_DATA 1008 //data block</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a><a class="code" href="rornet_8h.html#0ca512ff63e20c49cf6a25a6f2b48c49">00057</a> <span class="preprocessor">#define MSG2_USER 1009 //user credentials</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00059"></a><a class="code" href="rornet_8h.html#1a27d8f565e75baacb6d667306e99eee">00059</a> <span class="preprocessor">#define MSG2_DELETE 1010 //delete a disappearing truck</span>
<a name="l00060"></a>00060 <span class="preprocessor"></span>
<a name="l00061"></a><a class="code" href="rornet_8h.html#e6eebebe152a43c96924e217c582a123">00061</a> <span class="preprocessor">#define MSG2_CHAT 1011 //chat line</span>
<a name="l00062"></a>00062 <span class="preprocessor"></span>
<a name="l00063"></a><a class="code" href="rornet_8h.html#9a4e414459e30af6afc61512e1df598e">00063</a> <span class="preprocessor">#define MSG2_FORCE 1012 //Force information, attached to a netforce_t struct</span>
<a name="l00064"></a>00064 <span class="preprocessor"></span>
<a name="l00065"></a><a class="code" href="rornet_8h.html#7d41cff646d40fe0326b8e8c36ff489c">00065</a> <span class="preprocessor">#define MSG2_LISTUSERS 1013 // asks for connected users</span>
<a name="l00066"></a><a class="code" href="rornet_8h.html#93c64c4dc396269aff28ac27ef5864a6">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG2_LISTUSERS_RESP 1014 // replies with connected users</span>
<a name="l00067"></a>00067 <span class="preprocessor"></span>
<a name="l00068"></a><a class="code" href="rornet_8h.html#0173f3c5a82b5b5704244e18d4a8ba79">00068</a> <span class="preprocessor">#define MSG2_PASSWORD 1015 // requests password</span>
<a name="l00069"></a><a class="code" href="rornet_8h.html#7036c831ee33674c21d1a2f09a5f9db6">00069</a> <span class="preprocessor"></span><span class="preprocessor">#define MSG2_PASSWORD_RESP 1016 // replies password</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span>
<a name="l00071"></a>00071 <span class="comment">// server modes</span>
<a name="l00072"></a><a class="code" href="rornet_8h.html#06fc87d81c62e9abb8790b6e5713c55b535685e01d7e54a135d27eedde86d646">00072</a> <span class="keyword">enum</span> {<a class="code" href="rornet_8h.html#06fc87d81c62e9abb8790b6e5713c55b535685e01d7e54a135d27eedde86d646">SERVER_LAN</a>, <a class="code" href="rornet_8h.html#06fc87d81c62e9abb8790b6e5713c55b9357e5940e945a9dfa261bd428caf169">SERVER_INET</a>, <a class="code" href="rornet_8h.html#06fc87d81c62e9abb8790b6e5713c55be2396bf32c20d271d430ec8be2a4ff3c">SERVER_AUTO</a>};
<a name="l00073"></a>00073 
<a name="l00074"></a><a class="code" href="structheader__t.html">00074</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00075"></a>00075 {
<a name="l00076"></a><a class="code" href="structheader__t.html#216bd0f9aff83f30046a8fa927950fda">00076</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> command;
<a name="l00077"></a><a class="code" href="structheader__t.html#146e529325bef5aa9073cd9e691d2022">00077</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> source;
<a name="l00078"></a><a class="code" href="structheader__t.html#3dcfa63dc4f777b7b52cda9da1f8ecc1">00078</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> size;
<a name="l00079"></a>00079 } <a class="code" href="structheader__t.html">header_t</a>;
<a name="l00080"></a>00080 
<a name="l00081"></a><a class="code" href="structnetforce__t.html">00081</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00082"></a>00082 {
<a name="l00083"></a><a class="code" href="structnetforce__t.html#636d7c46f70f66166613223a41f9be2b">00083</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> target_uid;
<a name="l00084"></a><a class="code" href="structnetforce__t.html#29014dbe20cedc5e5ffdde801679d1cc">00084</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> node_id;
<a name="l00085"></a><a class="code" href="structnetforce__t.html#757bcce766709d05e1dc92de3e51d98d">00085</a>         <span class="keywordtype">float</span> fx;
<a name="l00086"></a><a class="code" href="structnetforce__t.html#532e766445799f3d415cc0b517c4c4fe">00086</a>         <span class="keywordtype">float</span> fy;
<a name="l00087"></a><a class="code" href="structnetforce__t.html#0d21c2fbc3ecf12876612a473ad6116c">00087</a>         <span class="keywordtype">float</span> fz;
<a name="l00088"></a>00088 } <a class="code" href="structnetforce__t.html">netforce_t</a>;
<a name="l00089"></a>00089 
<a name="l00090"></a><a class="code" href="rornet_8h.html#d862d460d766e5044e0d6513c8188d6d">00090</a> <span class="preprocessor">#define NETMASK_HORN        0x00000001</span>
<a name="l00091"></a><a class="code" href="rornet_8h.html#88d190a4b192ebf1f9847243f266f009">00091</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_LIGHTS      0x00000002</span>
<a name="l00092"></a><a class="code" href="rornet_8h.html#fdc0e1870f73253a0c18a966ba5d2a80">00092</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_BRAKES      0x00000004</span>
<a name="l00093"></a><a class="code" href="rornet_8h.html#ff6a8707661da0cf22457c96baab7ff4">00093</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_REVERSE     0x00000008</span>
<a name="l00094"></a><a class="code" href="rornet_8h.html#cbdb1895a1d0e1d7c0e7207a90876ed4">00094</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_BEACONS     0x00000010</span>
<a name="l00095"></a><a class="code" href="rornet_8h.html#592af9c5460fe879d56182ec888f3171">00095</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_BLINK_LEFT  0x00000020</span>
<a name="l00096"></a><a class="code" href="rornet_8h.html#3851781f408ed5ab8794ff92c8face72">00096</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_BLINK_RIGHT 0x00000040</span>
<a name="l00097"></a><a class="code" href="rornet_8h.html#3d4203caa58329297ee8a5e461b0ef1d">00097</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_BLINK_WARN  0x00000080</span>
<a name="l00098"></a><a class="code" href="rornet_8h.html#1ec3952d76870cf22824cbc3e626e0df">00098</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_CLIGHT1     0x00000100</span>
<a name="l00099"></a><a class="code" href="rornet_8h.html#ffac4c8e440f626b1c6a42bd130d5e82">00099</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_CLIGHT2     0x00000200</span>
<a name="l00100"></a><a class="code" href="rornet_8h.html#cb232816632fef809bb3993ec7e58612">00100</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_CLIGHT3     0x00000400</span>
<a name="l00101"></a><a class="code" href="rornet_8h.html#030cd541e40c2b2329e12d7326f97ec8">00101</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_CLIGHT4     0x00000800</span>
<a name="l00102"></a><a class="code" href="rornet_8h.html#b96ccc9e80aac18db828215f51d4e55f">00102</a> <span class="preprocessor"></span><span class="preprocessor">#define NETMASK_POLICEAUDIO 0x00001000</span>
<a name="l00103"></a>00103 <span class="preprocessor"></span>
<a name="l00104"></a><a class="code" href="structoob__t.html">00104</a> <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00105"></a>00105 {
<a name="l00106"></a><a class="code" href="structoob__t.html#4e945c634f2298da0fc4f88b44840d16">00106</a>         <span class="keywordtype">int</span> time;
<a name="l00107"></a><a class="code" href="structoob__t.html#0b1dca683c22c61ce7855bb357a1981d">00107</a>         <span class="keywordtype">float</span> engine_speed;
<a name="l00108"></a><a class="code" href="structoob__t.html#edd3e4131621b57e9cae496d0fa1651b">00108</a>         <span class="keywordtype">float</span> engine_force;
<a name="l00109"></a><a class="code" href="structoob__t.html#e2bfc8f569074f28ae5987a8256392a5">00109</a>         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flagmask;
<a name="l00110"></a>00110 } <a class="code" href="structoob__t.html">oob_t</a>;
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="comment">//REGISTRY STUFF</span>
<a name="l00115"></a><a class="code" href="rornet_8h.html#eb90db87a3760c59850772999f914240">00115</a> <span class="preprocessor">#define REPO_SERVER "api.rigsofrods.com"</span>
<a name="l00116"></a><a class="code" href="rornet_8h.html#29051134cfb450c34c7eeb52ce30e6c6">00116</a> <span class="preprocessor"></span><span class="preprocessor">#define REPO_URLPREFIX ""</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>
<a name="l00118"></a>00118 <span class="comment">//used by configurator</span>
<a name="l00119"></a><a class="code" href="rornet_8h.html#ec4c5c72ebbc3dfe84bfa4b1fde26fbd">00119</a> <span class="preprocessor">#define REPO_HTML_SERVERLIST "http://api.rigsofrods.com/serverlist/"</span>
<a name="l00120"></a>00120 <span class="preprocessor"></span>
<a name="l00121"></a>00121 <span class="comment">//debugging</span>
<a name="l00122"></a>00122 <span class="comment">//#define REFLECT_DEBUG </span>
<a name="l00123"></a>00123 
<a name="l00124"></a>00124 <span class="preprocessor">#endif</span>
</pre></div><hr size="1"><address style="text-align: right;"><small>Generated on Mon Dec 10 16:13:44 2007 for rorserver by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.3 </small></address>
</body>
</html>
